<div ui-select ng-model="$parent.selected" multiple crm-select-multiple>
  <div ui-select-choices
       repeat="emp.user as emp in emps | crmEmployeesSearch: $select.search track by emp.id"
       refresh="getEmployees($select.search)" refresh-delay="500"
       minimum-input-length="2">
       <h4 class="dsp-inline-block">
         <span ng-bind-html="::emp.user.contactProfile.firstname | highlight: $select.search"></span>
         <span ng-bind-html="::emp.user.contactProfile.lastname | highlight: $select.search"></span>
       </h4></h4>
       <span class="dsp-inline-block">({{ ::emp.user.username }})</span>
  </div>
  <div ui-select-match placeholder="{{ placeholder }}">
    <span ng-bind="$item.user.contactProfile.firstname"></span>
    <span ng-bind="$item.user.contactProfile.lastname"></span>
    <span ng-if="$item.user.contactProfile.firstname == null && $item.user.contactProfile.lastname == null"
          ng-bind="$item.user.username"></span>
  </div>
</div>
